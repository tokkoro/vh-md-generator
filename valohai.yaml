---

- step:
    name: first
    image: python
    command:
    - pip install valohai-utils
    - python train.py {parameters}
    inputs:
     - name: input_a
       optional: true
     - name: input_b
       optional: true
    parameters:
      - name: how_random
        description: How random you want the metadata to be
        type: float
        default: 0.05
      - name: epochs
        description: How many epochs do you want?
        type: integer
        default: 10
      - name: wait_time
        description: How long to wait between generated metadata (seconds)
        type: float
        default: 1

- pipeline:
    name: test
    nodes:
      - name: first
        step: first
        type: execution
      - name: second
        step: first
        type: execution
    edges:
      - [first.output.output_a, second.input.input_a]
      - [first.output.output_b, second.input.input_b]